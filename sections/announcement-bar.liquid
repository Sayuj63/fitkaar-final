{% schema %}
{
  "name": "Announcement Bar",
  "settings": [
    {
      "type": "text",
      "id": "text",
      "label": "Announcement Text",
      "default": "Free shipping on orders over â‚¹999"
    },
    {
      "type": "text",
      "id": "highlight_text",
      "label": "Highlight Text",
      "default": "Free shipping"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#000c5b"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#ffffff"
    }
  ]
}
{% endschema %}

<style>
.announcement-bar-gradient {
  background: linear-gradient(90deg, {{ section.settings.bg_color }} 0%, #1a2980 50%, {{ section.settings.bg_color }} 100%);
  background-size: 200% 100%;
  animation: gradientShift 8s ease infinite;
  color: {{ section.settings.text_color }};
}

@keyframes gradientShift {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}
</style>

<div class="announcement-bar announcement-bar-gradient">
  <div class="container text-center py-2 flex justify-center items-center h-full">
    <div class="typewriter-container">
       <p class="text-sm font-medium typewriter-text" style="margin: 0; display: inline-block;">
        {% assign text = section.settings.text %}
        {% assign highlight = section.settings.highlight_text %}
        {% if text contains highlight %}
          {{ text | replace: highlight, ' <span class="highlight">' | append: highlight | append: '</span>' | replace: '<span class="highlight">', '<span class="highlight" style="font-weight: 800; text-decoration: underline;">' }}
        {% else %}
          {{ text }}
        {% endif %}
      </p>
    </div>
  </div>
</div>
