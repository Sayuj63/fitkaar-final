{% schema %}
{
  "name": "Detailed Product Grid",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "BESTSELLERS"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    }
  ],
  "presets": [
    {
      "name": "Detailed Product Grid"
    }
  ]
}
{% endschema %}

<section class="py-12 bg-white">
  <div class="container">
    <h2 class="text-center text-4xl font-bold mb-8 uppercase" style="color: var(--color-primary); font-family: var(--font-heading);">{{ section.settings.title }}</h2>
    
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mobile-scroll-snap">
      {% assign collection = section.settings.collection %}
      {% if collection != blank %}
        {% for product in collection.products limit: 3 %}
          <div class="product-card mobile-scroll-item flex flex-col">
            <div class="relative mb-4 aspect-[3/4] overflow-hidden rounded-lg bg-gray-100">
              <a href="{{ product.url }}">
                <img src="{{ product.featured_image | image_url: width: 600 }}" alt="{{ product.title }}" class="w-full h-full object-cover hover:scale-105 transition-transform duration-500">
              </a>
              <!-- Bookmark Icon Mockup -->
              <div class="absolute bottom-2 right-2 bg-white p-2 rounded-full shadow-md">
                 <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg>
              </div>
            </div>
            
            <div class="product-info">
              <h3 class="text-xl font-bold mb-1" style="font-family: var(--font-heading);">{{ product.title }}</h3>
              
              <div class="flex items-center justify-between mb-2">
                 {% assign color_opt = product.options_with_values | where: "name", "Color" | first %}
                 <p class="text-sm text-gray-600">COLOR: <span class="text-black">{{ color_opt.values[0] | default: 'Standard' }}</span></p>
              </div>

              <!-- Color Swatches Mockup -->
              <div class="flex gap-2 mb-3">
                 {% for variant in product.variants limit: 3 %}
                    <div class="w-6 h-6 rounded-full border border-gray-300" style="background-color: {{ variant.option1 | downcase }};"></div>
                 {% endfor %}
              </div>
              
              <div class="flex items-center gap-2 mb-2">
                <span class="text-xs font-bold uppercase">SIZE</span>
                {% assign size_opt = product.options_with_values | where: "name", "Size" | first %}
                {% if size_opt %}
                {% for size in size_opt.values %}
                    <span class="text-xs text-gray-500">{{ size }}</span>
                {% endfor %}
                {% endif %}
              </div>
              
              <div class="text-green-600 text-xs font-bold flex items-center">
                <span class="w-2 h-2 bg-green-600 rounded-full inline-block mr-1"></span> In stock
              </div>
               
              <form method="post" action="/cart/add" class="mt-4">
                  <input type="hidden" name="id" value="{{ product.variants.first.id }}" />
                  <button type="submit" class="w-full bg-black text-white py-3 font-bold uppercase hover:opacity-90">Add to Cart - {{ product.price | money }}</button>
              </form>
            </div>
          </div>
        {% endfor %}
      {% else %}
        <!-- Placeholder for when no collection is selected -->
        {% for i in (1..3) %}
           <div class="product-card mobile-scroll-item">
              <div class="aspect-[3/4] bg-gray-200 mb-4 rounded-lg relative">
                 {{ 'product-' | append: i | placeholder_svg_tag: 'w-full h-full object-cover opacity-50' }}
                 <div class="absolute bottom-0 right-0 p-4"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" class="text-black" stroke="currentColor" stroke-width="2"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg></div>
              </div>
              <h3 class="text-xl font-bold">Example Product {{ i }}</h3>
              <p class="text-sm text-gray-500 mb-2">COLOR: Black / White</p>
              <div class="flex gap-2 mb-2">
                 <div class="w-6 h-6 rounded-full bg-black border border-gray-200"></div>
                 <div class="w-6 h-6 rounded-full bg-white border border-gray-200"></div>
              </div>
              <div class="text-green-600 text-xs font-bold">In stock</div>
           </div> 
        {% endfor %}
      {% endif %}
    </div>
  </div>
</section>
