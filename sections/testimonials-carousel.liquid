{% schema %}
{
  "name": "Testimonials Carousel",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Section Title",
      "default": "WHAT THEY'RE SAYING"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#f8f8f8"
    },
    {
      "type": "range",
      "id": "speed",
      "label": "Scroll Speed (seconds)",
      "min": 20,
      "max": 60,
      "step": 5,
      "default": 30
    },
    {
      "type": "text",
      "id": "image_1",
      "label": "Testimonial 1 URL"
    },
    {
      "type": "text",
      "id": "image_2",
      "label": "Testimonial 2 URL"
    },
    {
      "type": "text",
      "id": "image_3",
      "label": "Testimonial 3 URL"
    },
    {
      "type": "text",
      "id": "image_4",
      "label": "Testimonial 4 URL"
    },
    {
      "type": "text",
      "id": "image_5",
      "label": "Testimonial 5 URL"
    },
    {
      "type": "text",
      "id": "image_6",
      "label": "Testimonial 6 URL"
    },
    {
      "type": "text",
      "id": "image_7",
      "label": "Testimonial 7 URL"
    },
    {
      "type": "text",
      "id": "image_8",
      "label": "Testimonial 8 URL"
    },
    {
      "type": "text",
      "id": "image_9",
      "label": "Testimonial 9 URL"
    },
    {
      "type": "text",
      "id": "image_10",
      "label": "Testimonial 10 URL"
    }
  ],
  "presets": [
    {
      "name": "Testimonials Carousel"
    }
  ]
}
{% endschema %}

<style>
.testimonials-carousel-section {
  background: {{ section.settings.bg_color }};
  padding: 60px 0;
  overflow: hidden;
}

.testimonials-carousel-title {
  text-align: center;
  font-size: 2.5rem;
  font-weight: 900;
  letter-spacing: 0.1em;
  margin-bottom: 40px;
  font-family: var(--font-heading);
  color: #1a1a1a;
}

.testimonials-track-wrapper {
  position: relative;
  width: 100%;
  overflow: hidden;
}

/* Fade edges */
.testimonials-track-wrapper::before,
.testimonials-track-wrapper::after {
  content: '';
  position: absolute;
  top: 0;
  bottom: 0;
  width: 100px;
  z-index: 2;
  pointer-events: none;
}

.testimonials-track-wrapper::before {
  left: 0;
  background: linear-gradient(to right, {{ section.settings.bg_color }}, transparent);
}

.testimonials-track-wrapper::after {
  right: 0;
  background: linear-gradient(to left, {{ section.settings.bg_color }}, transparent);
}

.testimonials-track {
  display: flex;
  gap: 10px;
  animation: scrollTestimonials {{ section.settings.speed }}s linear infinite;
  width: max-content;
}

.testimonials-track:hover {
  animation-play-state: paused;
}

@keyframes scrollTestimonials {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(-50%);
  }
}

.testimonial-card {
  flex-shrink: 0;
  width: 680px;
  overflow: hidden;
  transition: transform 0.3s ease;
}

.testimonial-card:hover {
  transform: translateY(-5px);
}

.testimonial-card img {
  width: 100%;
  height: auto;
  display: block;
}

/* Responsive */
@media (max-width: 768px) {
  .testimonials-carousel-section {
    padding: 40px 0;
  }

  .testimonials-carousel-title {
    font-size: 1.8rem;
    margin-bottom: 30px;
  }

  .testimonial-card {
    width: 520px;
  }

  .testimonials-track {
    gap: 8px;
  }

  .testimonials-track-wrapper::before,
  .testimonials-track-wrapper::after {
    width: 50px;
  }
}

@media (max-width: 480px) {
  .testimonial-card {
    width: 420px;
  }

  .testimonials-carousel-title {
    font-size: 1.5rem;
  }

  .testimonials-track {
    gap: 6px;
  }
}
</style>

<section class="testimonials-carousel-section">
  {% if section.settings.title != blank %}
    <h2 class="testimonials-carousel-title">{{ section.settings.title }}</h2>
  {% endif %}

  <div class="testimonials-track-wrapper">
    <div class="testimonials-track" id="testimonialsTrack">
      <!-- First set of testimonials -->
      {% if section.settings.image_1 != blank %}
        <div class="testimonial-card">
          <img src="{{ section.settings.image_1 }}" alt="Customer testimonial" loading="lazy">
        </div>
      {% endif %}
      {% if section.settings.image_2 != blank %}
        <div class="testimonial-card">
          <img src="{{ section.settings.image_2 }}" alt="Customer testimonial" loading="lazy">
        </div>
      {% endif %}
      {% if section.settings.image_3 != blank %}
        <div class="testimonial-card">
          <img src="{{ section.settings.image_3 }}" alt="Customer testimonial" loading="lazy">
        </div>
      {% endif %}
      {% if section.settings.image_4 != blank %}
        <div class="testimonial-card">
          <img src="{{ section.settings.image_4 }}" alt="Customer testimonial" loading="lazy">
        </div>
      {% endif %}
      {% if section.settings.image_5 != blank %}
        <div class="testimonial-card">
          <img src="{{ section.settings.image_5 }}" alt="Customer testimonial" loading="lazy">
        </div>
      {% endif %}
      {% if section.settings.image_6 != blank %}
        <div class="testimonial-card">
          <img src="{{ section.settings.image_6 }}" alt="Customer testimonial" loading="lazy">
        </div>
      {% endif %}
      {% if section.settings.image_7 != blank %}
        <div class="testimonial-card">
          <img src="{{ section.settings.image_7 }}" alt="Customer testimonial" loading="lazy">
        </div>
      {% endif %}
      {% if section.settings.image_8 != blank %}
        <div class="testimonial-card">
          <img src="{{ section.settings.image_8 }}" alt="Customer testimonial" loading="lazy">
        </div>
      {% endif %}
      {% if section.settings.image_9 != blank %}
        <div class="testimonial-card">
          <img src="{{ section.settings.image_9 }}" alt="Customer testimonial" loading="lazy">
        </div>
      {% endif %}
      {% if section.settings.image_10 != blank %}
        <div class="testimonial-card">
          <img src="{{ section.settings.image_10 }}" alt="Customer testimonial" loading="lazy">
        </div>
      {% endif %}

      <!-- Duplicate set for seamless infinite loop -->
      {% if section.settings.image_1 != blank %}
        <div class="testimonial-card">
          <img src="{{ section.settings.image_1 }}" alt="Customer testimonial" loading="lazy">
        </div>
      {% endif %}
      {% if section.settings.image_2 != blank %}
        <div class="testimonial-card">
          <img src="{{ section.settings.image_2 }}" alt="Customer testimonial" loading="lazy">
        </div>
      {% endif %}
      {% if section.settings.image_3 != blank %}
        <div class="testimonial-card">
          <img src="{{ section.settings.image_3 }}" alt="Customer testimonial" loading="lazy">
        </div>
      {% endif %}
      {% if section.settings.image_4 != blank %}
        <div class="testimonial-card">
          <img src="{{ section.settings.image_4 }}" alt="Customer testimonial" loading="lazy">
        </div>
      {% endif %}
      {% if section.settings.image_5 != blank %}
        <div class="testimonial-card">
          <img src="{{ section.settings.image_5 }}" alt="Customer testimonial" loading="lazy">
        </div>
      {% endif %}
      {% if section.settings.image_6 != blank %}
        <div class="testimonial-card">
          <img src="{{ section.settings.image_6 }}" alt="Customer testimonial" loading="lazy">
        </div>
      {% endif %}
      {% if section.settings.image_7 != blank %}
        <div class="testimonial-card">
          <img src="{{ section.settings.image_7 }}" alt="Customer testimonial" loading="lazy">
        </div>
      {% endif %}
      {% if section.settings.image_8 != blank %}
        <div class="testimonial-card">
          <img src="{{ section.settings.image_8 }}" alt="Customer testimonial" loading="lazy">
        </div>
      {% endif %}
      {% if section.settings.image_9 != blank %}
        <div class="testimonial-card">
          <img src="{{ section.settings.image_9 }}" alt="Customer testimonial" loading="lazy">
        </div>
      {% endif %}
      {% if section.settings.image_10 != blank %}
        <div class="testimonial-card">
          <img src="{{ section.settings.image_10 }}" alt="Customer testimonial" loading="lazy">
        </div>
      {% endif %}
    </div>
  </div>
</section>
